#!/bin/bash
# Variables
KEY_PAIR_NAME="bcitkey"       # Replace with your desired AWS key pair name
PRIVATE_KEY_FILE="/c/Users/Juan Tarigan/Downloads/bcitkey.pem" # Replace with the path to your .pem file
PUBLIC_KEY_FILE="/c/Users/Juan Tarigan/Downloads/bcitkey.pub"  # Replace with the desired path for the public key file
# Check if the private key file exists
if [[ ! -f "$PRIVATE_KEY_FILE" ]]; then
    echo "Error: Private key file '$PRIVATE_KEY_FILE' not found."
    exit 1
fi
# Generate the public key from the private key
echo "Generating public key from private key..."
ssh-keygen -y -f "$PRIVATE_KEY_FILE" > "$PUBLIC_KEY_FILE"
if [[ $? -ne 0 ]]; then
    echo "Error: Failed to generate public key."
    exit 1
fi
echo "Public key saved to '$PUBLIC_KEY_FILE'."
# Import the public key into AWS
echo "Importing key pair '$KEY_PAIR_NAME' to AWS..."
aws ec2 import-key-pair --key-name "$KEY_PAIR_NAME" --public-key-material fileb://"$PUBLIC_KEY_FILE"